<p>transaksi-telkom works!</p>
<c-col xs="12">
    <div class="mb-4" style="text-align:right; margin:15px 15px 0px 15px;">
        <button type="button" class="btn btn-primary btn-sm" (click)="showAdd()"><i style="color:white;"
            class="pi pi-plus"></i>Tambah Transaksi</button>
    </div>

    <!-- section confirmation -->
    <p-confirmDialog #cd [style]="{width: '50vw'}">
        <ng-template pTemplate="footer">
            <!-- <button type="button" pButton icon="pi pi-times" label="No" (click)="cd.reject()"></button> -->
            <button type="button" pButton icon="pi pi-check" label="OK" (click)="cd.accept()"></button>
        </ng-template>
    </p-confirmDialog>

    <!-- section form -->
    <p-dialog header={{header}} [(visible)]="transaksiform" [style] = "{width : '50%'}" [draggable]="false" [dismissableMask]="false">
        <div>
            <hr>
            <div class="mt-4">
                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <div *ngIf="isEdit || isDelete">
                            <label>Id transaksi</label>
                            <input type="number" formControlName="idTransaksi" class="form-control"
                                [ngClass]="{'is-invalid':submitted && f['idTransaksi'].errors}">
                            <div *ngIf="submitted && f['idTransaksi'].errors" class="invalid-feedback">
                                <div *ngIf="f['idTransaksi'].errors['required']">ID Pelanggan dibutuhkan</div>
                                <div *ngIf="f['idTransaksi'].errors['minlength']">ID Pelanggan minimal
                                    {{f['idTransaksi'].errors['minlength']['requiredLength']}} karakter</div>
                                <div *ngIf="f['idTransaksi'].errors['maxlength']">ID Pelanggan maksimal
                                    {{f['idTransaksi'].errors['maxlength']['requiredLength']}} karakter</div>
                            </div>
                        </div>

                        <!-- <label>Id pelanggan</label>
                        <input type="number" formControlName="idPelanggan" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['idPelanggan'].errors}" />
                        <div *ngIf="submitted && f['idPelanggan'].errors" class="invalid-feedback">
                            <div *ngIf="f['idPelanggan'].errors['required']">First Name is required</div>
                            <div *ngIf="f['idPelanggan'].errors['minlength']">First Name min
                                {{f['idPelanggan'].errors['minlength']['requiredLength']}} character</div>
                            <div *ngIf="f['idPelanggan'].errors['maxlength']">First Name max
                                {{f['idPelanggan'].errors['maxlength']['requiredLength']}} character</div>
                        </div> -->
                        
                        <!-- edited -->
                        <label>ID Pelanggan</label>
                        <select class="form-select" formControlName="idPelanggan" aria-label="select pelanggan">
                            <option value="">(choose)</option>
                            <option *ngFor="let item of pelanggan" value={{item.idPelanggan}}>{{item.idPelanggan}}
                                - {{item.nama}}</option>
                        </select>
                        <div *ngIf="submitted && f['idPelanggan'].errors" class="invalid-feedback">
                            <div *ngIf="f['idPelanggan'].errors['required']">ID Pelanggan dibutuhkan</div>
                        </div>
                        <!--  -->

                        <label>bulan tagihan</label>
                        <input type="number" formControlName="bulanTagihan" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['bulanTagihan'].errors}" />
                        <div *ngIf="submitted && f['bulanTagihan'].errors" class="invalid-feedback">
                            <div *ngIf="f['bulanTagihan'].errors['required']">Last Name is required</div>
                            <div *ngIf="f['bulanTagihan'].errors['minlength']">Last Name min
                                {{f['bulanTagihan'].errors['minlength']['requiredLength']}} character</div>
                            <div *ngIf="f['bulanTagihan'].errors['maxlength']">Last Name max
                                {{f['bulanTagihan'].errors['maxlength']['requiredLength']}} character</div>
                        </div>

                        <label>tahun tagihan</label>
                        <input type="number" formControlName="tahunTagihan" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['tahunTagihan'].errors}" />
                        <div *ngIf="submitted && f['tahunTagihan'].errors" class="invalid-feedback">
                            <div *ngIf="f['tahunTagihan'].errors['required']">Email is required</div>
                        </div>
                        

                        <label>uang</label>
                        <input type="number" formControlName="uang" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['uang'].errors}" />

                        <!-- <label>Hire Date</label>
                        <input type="date" formControlName="hireDate" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['hireDate'].errors}" />
                        <div *ngIf="submitted && f['hireDate'].errors" class="invalid-feedback">
                            <div *ngIf="f['hireDate'].errors['required']">Hire Date is required</div>
                        </div> > -->

                        <label>status</label>
                        <input type="number" formControlName="status" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['status'].errors}" />

                        <!-- <label>Hire Date</label>
                        <input type="date" formControlName="hireDate" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['hireDate'].errors}" />
                        <div *ngIf="submitted && f['hireDate'].errors" class="invalid-feedback">
                            <div *ngIf="f['hireDate'].errors['required']">Hire Date is required</div>
                        </div> -->
                    </div>


                    <div *ngIf="isEdit || isAdd" class="form-group mt-4" align="center">
                        <button type="submit" class="btn btn-primary">Submit</button> &nbsp;
                        <button type="button" (click)="onReset()" class="btn btn-warning float-right">Reset</button>
                    </div>
                    <div *ngIf="isDelete" class="form-group mt-4" align="center">
                        <button type="submit" class="btn btn-danger" style="color:white"
                            (click)="onDelete(); ">Delete</button> &nbsp;
                    </div>
                </form>
            </div>
        </div>
    </p-dialog>
    <c-card class="mb-4">
        <c-card-header>
            <!-- <strong>Employee List <span>({{ pelanggan?.length}} data)</span></strong> -->
            <strong>Master Pelanggan</strong>
        </c-card-header>
        
        <!-- section data tabel -->
        <div class="tab-content rounded-bottom">
            <div class="tab-pane p-3 active preview table-responsive" role="tabpanel" id="preview-24">
                <p-table [value]="transaksi" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,15,20]">
                    <ng-template pTemplate="header">
                        <tr>
                            <th *ngFor="let col of cols">
                                {{col.header}}
                            </th>
                            <th>
                                Action
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-transaksi>
                        <tr>
                            <td *ngFor="let col of cols">
                                {{transaksi[col.field]}}
                            </td>
                            <td>
                                <button type="button" class="btn btn-success btn-sm" (click)="showEdit(transaksi)"><i style="color:white"
                                        class="pi pi-pencil"></i></button> 
                                <button type="button" class="btn btn-danger btn-sm" (click)="showdelete(transaksi)"><i style="color:white"
                                        class="pi pi-trash"></i></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <c-card-body>