<c-col xs="12">

    <!-- menambahkan button add nasabah -->
    <div class="mb-4" style="text-align:right; margin:15px 15px 0px 15px;">
        <button pButton pRipple type="button" label="Add Nasabah" icon="pi pi-plus" class="p-button-warning"
            (click)="showAdd()"></button>
    </div>

    <!-- konfirmasi button -->
    <p-confirmDialog #cd [style]="{width: '50vw'}">
        <ng-template pTemplate="footer">
            <button type="button" pButton icon="pi pi-check" label="OK" (click)="cd.accept()"></button>
        </ng-template>
    </p-confirmDialog>

    <!-- form untuk add dan edit nasabah -->
    <p-dialog header={{header}} [(visible)]="masterBankform" [style]="{width : '50%'}" [draggable]="false"
        [dismissableMask]="false">
        <div>
            <hr>
            <div class="mt-4">
                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <div *ngIf="isEdit || isDelete">
                            <label>Nomor Rekening</label>
                            <input type="number" formControlName="norek" class="form-control"
                                [ngClass]="{'is-invalid':submitted && f['norek'].errors}">
                        </div>

                        <div *ngIf="isAdd || isDelete">
                            <label>ID Pengguna</label>
                            <select class="form-select" formControlName="userId" aria-label="select users"
                                (change)="changeSelect($event)">
                                <option value="">(choose)</option>
                                <option *ngFor="let item of users" value="{{ item.userId }}">
                                    {{ item.userId }}: {{ item.nama }}</option>
                            </select>
                        </div>

                        <label>Nama Nasabah</label>
                        <input type="text" formControlName="nama" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['nama'].errors}" />
                        <div *ngIf="submitted && f['nama'].errors" class="invalid-feedback">
                            <div *ngIf="f['nama'].errors['required']">Nama Nasabah is required</div>
                        </div>

                        <label>Alamat</label>
                        <input type="text" formControlName="alamat" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['alamat'].errors}" />
                        <div *ngIf="submitted && f['alamat'].errors" class="invalid-feedback">
                            <div *ngIf="f['alamat'].errors['required']">Alamat Nasabah is required</div>
                        </div>

                        <label>Nomor Telepon</label>
                        <input type="text" formControlName="notlp" class="form-control"
                            [ngClass]="{'is-invalid':submitted && f['notlp'].errors}" />
                        <div *ngIf="submitted && f['notlp'].errors" class="invalid-feedback">
                            <div *ngIf="f['notlp'].errors['required']">Nomor Telepon Nasabah is required</div>
                        </div>

                        <div *ngIf="isAdd||isDelete">
                            <label>Nominal</label>
                            <input type="number" formControlName="saldo" class="form-control"
                                [ngClass]="{'is-invalid':submitted && f['saldo'].errors}">
                        </div>
                    </div>

                    <!-- tombol di dalam form add dan edit -->
                    <div *ngIf="isEdit || isAdd" class="form-group mt-4" align="center">
                        <button pButton type="button" label="Submit" class="p-button-primary"
                            (click)="onSubmit()"></button>&nbsp;
                        <button pButton type="button" label="Reset" class="p-button-warning"
                            (click)="onReset()"></button>
                    </div>

                    <!-- tombol di dalam form delete -->
                    <div *ngIf="isDelete" class="form-group mt-4" align="center">
                        <button pButton type="submit" label="Delete" class="p-button-danger"
                            (click)="onDelete()"></button>&nbsp;
                        <button pButton type="button" label="Reset" class="p-button-warning"
                            (click)="onReset()"></button>
                    </div>
                </form>
            </div>
        </div>

        <!-- tampilan data master bank -->
    </p-dialog>
    <c-card class="mb-4">
        <c-card-header>
            <strong>Data Nasabah<span>({{ masterBank?.length}} data)</span></strong>
        </c-card-header>

        <!-- tabel yang ditampilkan -->
        <div class="tab-content rounded-bottom">
            <div class="tab-pane p-3 active preview table-responsive" role="tabpanel" id="preview-24">
                <p-table #dt [value]="masterBank" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,15,20]"
                    [globalFilterFields]="['norek','nama', 'alamat', 'notlp', 'saldo', 'userId']">
                    <ng-template pTemplate="caption">
                        <div class="flex">
                            <span class="p-input-icon-left p-ml-auto">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" [(ngModel)]="searchQuery"
                                    (input)="dt.filterGlobal($any($event.target)?.value, 'contains')"
                                    placeholder="Search">
                            </span>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Nomor Rekening</th>
                            <th pSortableColumn="userId">User Id <p-sortIcon field="userId"></p-sortIcon></th>
                            <th>Nama Nasabah
                                <p-columnFilter type="text" field="nama" display="menu"></p-columnFilter>
                            </th>
                            <th>Alamat</th>
                            <th>Nomor Telepon</th>
                            <th>Saldo</th>
                            <th>
                                Action
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-masterBank>
                        <tr>
                            <td>{{masterBank.norek}}</td>
                            <td>{{masterBank.userId}}</td>
                            <td>{{masterBank.nama}}</td>
                            <td>{{masterBank.alamat}}</td>
                            <td>{{masterBank.notlp}}</td>
                            <td>{{masterBank.saldo | currency:'IDR ':'symbol':'3.2-2'}}</td>

                            <!-- button edit dan delete -->
                            <td class="row">
                                <button pButton pRipple type="button" icon="pi pi-pencil"
                                    class="p-button-rounded p-button-info p-button-text col"
                                    (click)="showEdit(masterBank)"></button> &nbsp;
                                <button pButton pRipple type="button" icon="pi pi-trash"
                                    class="p-button-rounded p-button-danger p-button-text col"
                                    (click)="showDelete(masterBank)"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <c-card-body>